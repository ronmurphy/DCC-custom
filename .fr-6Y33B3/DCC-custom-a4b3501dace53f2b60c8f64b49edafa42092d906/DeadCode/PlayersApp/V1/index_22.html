<!DOCTYPE html>
<html lang="en">
<!-- Update 96 - split CSS file, js file to external -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Post-Apocalyptic Character Sheet</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/rpg-awesome/0.2.0/css/rpg-awesome.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css">

</head>
<body>
    <div class="container">
        <div class="header">
            <h1><i class="ra ra-knight-helmet"></i> Wasteland Chronicles</h1>
            <p>Post-Apocalyptic Character Manager</p>
            <button class="back-to-select-btn" onclick="backToCharacterSelect()" title="Back to Character Select">
    <span class="material-icons">arrow_back</span>
    Character Select
</button>
        </div>

        <div class="tabs">
            <button class="tab active" data-tab="creation">
                <i class="ra ra-player"></i>
                Creation
            </button>
            <button class="tab" data-tab="character">
                <i class="ra ra-muscle-up"></i>
                Character
            </button>
            <button class="tab" data-tab="inventory">
                <i class="ra ra-sword"></i>
                Inventory
            </button>
            <button class="tab" data-tab="magic">
                <i class="ra ra-lightning"></i>
                Magic
            </button>
            <button class="tab" data-tab="status">
                <i class="ra ra-heart-broken"></i>
                Status
            </button>
            <button class="tab" data-tab="notes">
                <i class="ra ra-scroll-unfurled"></i>
                Notes
            </button>
            <button class="tab" data-tab="rolling">
                <i class="ra ra-dice"></i>
                Rolling
            </button>

        </div>

        <!-- Character Creation Tab -->
        <div class="tab-content active" id="creation">
            <div style="display: grid; gap: 20px; margin-bottom: 20px;">
                <!-- Basic Info -->
                <div class="section-card">
                    <h2 class="section-title">Basic Information</h2>
                    <div class="form-group">
                        <label for="char-name">Character Name</label>
                        <input type="text" id="char-name" placeholder="Enter character name">
                    </div>
                    <div class="form-group">
                        <label for="char-level">Starting Level</label>
                        <input type="number" id="char-level" value="1" min="1" max="20">
                    </div>
                </div>

                <!-- Portrait Upload -->
                <div class="section-card">
                    <h2 class="section-title">Character Portrait</h2>
                    <div style="display: flex; flex-direction: column; align-items: center; gap: 15px;">
                        <div id="portrait-display" style="width: 120px; height: 120px; border: 2px dashed #4a4a6a; border-radius: 10px; display: flex; flex-direction: column; align-items: center; justify-content: center; background: rgba(40, 40, 60, 0.8); overflow: hidden;">
                            <i class="ra ra-player" style="font-size: 3em; color: #4a4a6a;"></i>
                            <p style="color: #8a8a8a; font-size: 12px; margin-top: 5px; text-align: center;">No image uploaded</p>
                        </div>
                        <input type="file" id="portrait-upload" accept="image/*" style="display: none;">
                        <button class="btn-secondary" onclick="document.getElementById('portrait-upload').click()">
                            <i class="ra ra-image"></i> Upload Portrait
                        </button>
                    </div>
                </div>

                <!-- Backstory -->
                <div class="section-card">
                    <h2 class="section-title">Pre-War Background</h2>
                    <div class="form-group">
                        <label for="job-select">Old World Profession</label>
                        <select id="job-select">
                            <option value="">Select your past...</option>
                            <option value="engineer">Engineer</option>
                            <option value="doctor">Doctor</option>
                            <option value="lawyer">Lawyer</option>
                            <option value="teacher">Teacher</option>
                            <option value="mechanic">Mechanic</option>
                            <option value="police">Police Officer</option>
                            <option value="firefighter">Firefighter</option>
                            <option value="chef">Chef</option>
                            <option value="artist">Artist</option>
                            <option value="programmer">Programmer</option>
                            <option value="soldier">Soldier</option>
                            <option value="athlete">Athlete</option>
                            <option value="scientist">Scientist</option>
                            <option value="musician">Musician</option>
                            <option value="writer">Writer</option>
                            <option value="custom">Custom Background</option>
                        </select>
                        <input type="text" id="custom-job" placeholder="Enter custom background" style="display: none; margin-top: 10px;">
                        
                        <!-- Custom Job Bonuses -->
                        <div id="custom-job-bonuses" style="display: none; margin-top: 15px; padding: 15px; background: rgba(40, 40, 60, 0.8); border-radius: 8px;">
                            <h4 style="color: #f4d03f; margin-bottom: 10px;">Custom Background Bonuses</h4>
                            <div style="display: grid; gap: 10px;">
                                <label style="font-size: 14px; color: #c0c0c0;">Choose 1-2 Attributes (1 = +3, 2 = +2/+1):</label>
                                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px;">
                                    <label style="display: flex; align-items: center; gap: 5px; font-size: 12px;">
                                        <input type="checkbox" id="custom-job-str" onchange="updateCustomJobBonuses()"> STR
                                    </label>
                                    <label style="display: flex; align-items: center; gap: 5px; font-size: 12px;">
                                        <input type="checkbox" id="custom-job-dex" onchange="updateCustomJobBonuses()"> DEX
                                    </label>
                                    <label style="display: flex; align-items: center; gap: 5px; font-size: 12px;">
                                        <input type="checkbox" id="custom-job-con" onchange="updateCustomJobBonuses()"> CON
                                    </label>
                                    <label style="display: flex; align-items: center; gap: 5px; font-size: 12px;">
                                        <input type="checkbox" id="custom-job-int" onchange="updateCustomJobBonuses()"> INT
                                    </label>
                                    <label style="display: flex; align-items: center; gap: 5px; font-size: 12px;">
                                        <input type="checkbox" id="custom-job-wis" onchange="updateCustomJobBonuses()"> WIS
                                    </label>
                                    <label style="display: flex; align-items: center; gap: 5px; font-size: 12px;">
                                        <input type="checkbox" id="custom-job-cha" onchange="updateCustomJobBonuses()"> CHA
                                    </label>
                                </div>
                                
                                <label style="font-size: 14px; color: #c0c0c0; margin-top: 10px;">Add 2 Skills:</label>
                                <div style="display: grid; gap: 8px;">
                                    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 8px;">
                                        <select id="custom-job-skill1">
                                            <option value="">Choose skill...</option>
                                            <option value="custom">Custom Skill</option>
                                            <option value="Acrobatics">Acrobatics</option>
                                            <option value="Animal Handling">Animal Handling</option>
                                            <option value="Arcana">Arcana</option>
                                            <option value="Athletics">Athletics</option>
                                            <option value="Deception">Deception</option>
                                            <option value="History">History</option>
                                            <option value="Insight">Insight</option>
                                            <option value="Intimidation">Intimidation</option>
                                            <option value="Investigation">Investigation</option>
                                            <option value="Medicine">Medicine</option>
                                            <option value="Nature">Nature</option>
                                            <option value="Perception">Perception</option>
                                            <option value="Performance">Performance</option>
                                            <option value="Persuasion">Persuasion</option>
                                            <option value="Religion">Religion</option>
                                            <option value="Sleight of Hand">Sleight of Hand</option>
                                            <option value="Stealth">Stealth</option>
                                            <option value="Survival">Survival</option>
                                        </select>
                                        <select id="custom-job-skill1-stat">
                                            <option value="strength">STR</option>
                                            <option value="dexterity">DEX</option>
                                            <option value="constitution">CON</option>
                                            <option value="intelligence">INT</option>
                                            <option value="wisdom">WIS</option>
                                            <option value="charisma">CHA</option>
                                        </select>
                                    </div>
                                    <input type="text" id="custom-job-skill1-name" placeholder="Custom skill name" style="display: none;">
                                    
                                    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 8px;">
                                        <select id="custom-job-skill2">
                                            <option value="">Choose skill...</option>
                                            <option value="custom">Custom Skill</option>
                                            <option value="Acrobatics">Acrobatics</option>
                                            <option value="Animal Handling">Animal Handling</option>
                                            <option value="Arcana">Arcana</option>
                                            <option value="Athletics">Athletics</option>
                                            <option value="Deception">Deception</option>
                                            <option value="History">History</option>
                                            <option value="Insight">Insight</option>
                                            <option value="Intimidation">Intimidation</option>
                                            <option value="Investigation">Investigation</option>
                                            <option value="Medicine">Medicine</option>
                                            <option value="Nature">Nature</option>
                                            <option value="Perception">Perception</option>
                                            <option value="Performance">Performance</option>
                                            <option value="Persuasion">Persuasion</option>
                                            <option value="Religion">Religion</option>
                                            <option value="Sleight of Hand">Sleight of Hand</option>
                                            <option value="Stealth">Stealth</option>
                                            <option value="Survival">Survival</option>
                                        </select>
                                        <select id="custom-job-skill2-stat">
                                            <option value="strength">STR</option>
                                            <option value="dexterity">DEX</option>
                                            <option value="constitution">CON</option>
                                            <option value="intelligence">INT</option>
                                            <option value="wisdom">WIS</option>
                                            <option value="charisma">CHA</option>
                                        </select>
                                    </div>
                                    <input type="text" id="custom-job-skill2-name" placeholder="Custom skill name" style="display: none;">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Wasteland Class -->
                <div class="section-card">
                    <h2 class="section-title">Wasteland Class</h2>
                    <div class="form-group">
                        <label for="class-select">Survival Specialization</label>
                        <select id="class-select">
                            <option value="">Choose your path...</option>
                            <option value="fighter">Warrior</option>
                            <option value="wizard">Tech-Mage</option>
                            <option value="rogue">Scavenger</option>
                            <option value="cleric">Healer</option>
                            <option value="ranger">Wasteland Ranger</option>
                            <option value="barbarian">Raider</option>
                            <option value="bard">Storyteller</option>
                            <option value="paladin">Guardian</option>
                            <option value="warlock">Cult Initiate</option>
                            <option value="sorcerer">Mutant</option>
                            <option value="monk">Survivor</option>
                            <option value="druid">Nature Speaker</option>
                            <option value="gunslinger">Gunslinger</option>
                            <option value="hacker">Data Runner</option>
                            <option value="medic">Field Medic</option>
                            <option value="engineer_class">Engineer</option>
                            <option value="pilot">Vehicle Pilot</option>
                            <option value="survivalist">Survivalist</option>
                            <option value="custom_class">Custom Class</option>
                        </select>
                        <input type="text" id="custom-class" placeholder="Enter custom class" style="display: none; margin-top: 10px;">
                        
                        <!-- Custom Class Bonuses -->
                        <div id="custom-class-bonuses" style="display: none; margin-top: 15px; padding: 15px; background: rgba(40, 40, 60, 0.8); border-radius: 8px;">
                            <h4 style="color: #f4d03f; margin-bottom: 10px;">Custom Class Bonuses</h4>
                            <div style="display: grid; gap: 10px;">
                                <label style="font-size: 14px; color: #c0c0c0;">Choose 1-2 Attributes (1 = +3, 2 = +2/+1):</label>
                                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px;">
                                    <label style="display: flex; align-items: center; gap: 5px; font-size: 12px;">
                                        <input type="checkbox" id="custom-class-str" onchange="updateCustomClassBonuses()"> STR
                                    </label>
                                    <label style="display: flex; align-items: center; gap: 5px; font-size: 12px;">
                                        <input type="checkbox" id="custom-class-dex" onchange="updateCustomClassBonuses()"> DEX
                                    </label>
                                    <label style="display: flex; align-items: center; gap: 5px; font-size: 12px;">
                                        <input type="checkbox" id="custom-class-con" onchange="updateCustomClassBonuses()"> CON
                                    </label>
                                    <label style="display: flex; align-items: center; gap: 5px; font-size: 12px;">
                                        <input type="checkbox" id="custom-class-int" onchange="updateCustomClassBonuses()"> INT
                                    </label>
                                    <label style="display: flex; align-items: center; gap: 5px; font-size: 12px;">
                                        <input type="checkbox" id="custom-class-wis" onchange="updateCustomClassBonuses()"> WIS
                                    </label>
                                    <label style="display: flex; align-items: center; gap: 5px; font-size: 12px;">
                                        <input type="checkbox" id="custom-class-cha" onchange="updateCustomClassBonuses()"> CHA
                                    </label>
                                </div>
                                
                                <label style="font-size: 14px; color: #c0c0c0; margin-top: 10px;">Add 2 Skills:</label>
                                <div style="display: grid; gap: 8px;">
                                    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 8px;">
                                        <select id="custom-class-skill1">
                                            <option value="">Choose skill...</option>
                                            <option value="custom">Custom Skill</option>
                                            <option value="Acrobatics">Acrobatics</option>
                                            <option value="Animal Handling">Animal Handling</option>
                                            <option value="Arcana">Arcana</option>
                                            <option value="Athletics">Athletics</option>
                                            <option value="Deception">Deception</option>
                                            <option value="History">History</option>
                                            <option value="Insight">Insight</option>
                                            <option value="Intimidation">Intimidation</option>
                                            <option value="Investigation">Investigation</option>
                                            <option value="Medicine">Medicine</option>
                                            <option value="Nature">Nature</option>
                                            <option value="Perception">Perception</option>
                                            <option value="Performance">Performance</option>
                                            <option value="Persuasion">Persuasion</option>
                                            <option value="Religion">Religion</option>
                                            <option value="Sleight of Hand">Sleight of Hand</option>
                                            <option value="Stealth">Stealth</option>
                                            <option value="Survival">Survival</option>
                                        </select>
                                        <select id="custom-class-skill1-stat">
                                            <option value="strength">STR</option>
                                            <option value="dexterity">DEX</option>
                                            <option value="constitution">CON</option>
                                            <option value="intelligence">INT</option>
                                            <option value="wisdom">WIS</option>
                                            <option value="charisma">CHA</option>
                                        </select>
                                    </div>
                                    <input type="text" id="custom-class-skill1-name" placeholder="Custom skill name" style="display: none;">
                                    
                                    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 8px;">
                                        <select id="custom-class-skill2">
                                            <option value="">Choose skill...</option>
                                            <option value="custom">Custom Skill</option>
                                            <option value="Acrobatics">Acrobatics</option>
                                            <option value="Animal Handling">Animal Handling</option>
                                            <option value="Arcana">Arcana</option>
                                            <option value="Athletics">Athletics</option>
                                            <option value="Deception">Deception</option>
                                            <option value="History">History</option>
                                            <option value="Insight">Insight</option>
                                            <option value="Intimidation">Intimidation</option>
                                            <option value="Investigation">Investigation</option>
                                            <option value="Medicine">Medicine</option>
                                            <option value="Nature">Nature</option>
                                            <option value="Perception">Perception</option>
                                            <option value="Performance">Performance</option>
                                            <option value="Persuasion">Persuasion</option>
                                            <option value="Religion">Religion</option>
                                            <option value="Sleight of Hand">Sleight of Hand</option>
                                            <option value="Stealth">Stealth</option>
                                            <option value="Survival">Survival</option>
                                        </select>
                                        <select id="custom-class-skill2-stat">
                                            <option value="strength">STR</option>
                                            <option value="dexterity">DEX</option>
                                            <option value="constitution">CON</option>
                                            <option value="intelligence">INT</option>
                                            <option value="wisdom">WIS</option>
                                            <option value="charisma">CHA</option>
                                        </select>
                                    </div>
                                    <input type="text" id="custom-class-skill2-name" placeholder="Custom skill name" style="display: none;">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Attributes -->
                <div class="section-card">
                    <h2 class="section-title">Attributes</h2>
                    <div class="stats-header">
                        <div class="points-display">
                            <h3>Available Points</h3>
                            <div class="points-value" id="available-points">3</div>
                        </div>
                    </div>
                    
                    <div class="health-magic-display">
                        <div class="hp-mp-box hp-box">
                            <h3>Health Points</h3>
                            <div class="hp-mp-value" id="health-points">3</div>
                            <div style="font-size: 12px; color: #8a8a8a; margin-top: 5px;">CON + Level</div>
                        </div>
                        <div class="hp-mp-box mp-box">
                            <h3>Magic Points</h3>
                            <div class="hp-mp-value" id="magic-points">4</div>
                            <div style="font-size: 12px; color: #8a8a8a; margin-top: 5px;">WIS + INT</div>
                        </div>
                    </div>

                    <div class="stats-grid" id="stats-grid">
                        <!-- Stats will be populated by JavaScript -->
                    </div>
                </div>

                <!-- Active Bonuses Display -->
                <div class="section-card" id="bonuses-display" style="display: none;">
                    <h2 class="section-title">Active Bonuses</h2>
                    <div id="bonuses-content">
                        <!-- Bonuses will be populated by JavaScript -->
                    </div>
                </div>

                <!-- Personal Details -->
                <div class="section-card">
                    <h2 class="section-title">Personal Details</h2>
                    <div class="form-group">
                        <label for="char-age">Age</label>
                        <input type="number" id="char-age" placeholder="25">
                    </div>
                    <div class="form-group">
                        <label for="char-backstory">Personal History</label>
                        <textarea id="char-backstory" placeholder="Tell your character's story..." rows="4"></textarea>
                    </div>
                </div>

                <!-- Save/Load -->
<div class="section-card">
    <button class="btn-primary" onclick="saveCharacter()">
        <i class="ra ra-save"></i> Save Character
    </button>
    <br><br>
    <button class="btn-secondary" onclick="loadCharacter()">
        <i class="ra ra-load"></i> Load Character
    </button>
    <br><br>
    <button class="btn-secondary" onclick="exportCharacterToJSON()">
        <i class="ra ra-download"></i> Export to JSON
    </button>
</div>
            </div>
        </div>

        <!-- Character Tab -->
        <div class="tab-content" id="character">
            <!-- Character Summary -->
            <div class="section-card">
                <h2 class="section-title" id="char-display-name">Character Overview</h2>
                <div id="char-summary" style="text-align: center; color: #c0c0c0; margin-bottom: 15px;">
                    <!-- Character summary will be populated by JavaScript -->
                </div>
                
                <div class="health-magic-display">
                    <div class="hp-mp-box hp-box">
                        <h3>Health Points</h3>
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                            <span style="font-size: 14px; color: #ff6b6b;">Current: <span id="char-current-hp">3</span></span>
                            <span style="font-size: 14px; color: #ff6b6b;">Total: <span id="char-total-hp">3</span></span>
                        </div>
                        <div class="hp-mp-controls">
                            <button class="control-btn" onclick="adjustCurrentHP(-1)">-</button>
                            <button class="control-btn" onclick="adjustCurrentHP(1)">+</button>
                        </div>
                        
                        <!-- Damage Testing -->
                        <div style="margin-top: 15px; padding: 12px; background: rgba(60, 60, 80, 0.6); border-radius: 8px; border: 1px solid #4a4a6a;">
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <input type="number" id="damage-input" placeholder="Damage" min="1" max="50" value="5" style="width: 80px; padding: 8px; background: #2a2a4a; border: 1px solid #4a4a6a; border-radius: 4px; color: #e0e0e0; font-size: 14px;">
                                <button class="btn-secondary" onclick="testDamage()" style="background: #8a4a4a; color: white; flex: 1;">
                                    <i class="ra ra-sword"></i> Take Damage
                                </button>
                                <div style="font-size: 12px; color: #8a8a8a;">
                                    Armor: <span id="total-defense-display">0</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="hp-mp-box mp-box">
                        <h3>Magic Points</h3>
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                            <span style="font-size: 14px; color: #da70d6;">Current: <span id="char-current-mp">4</span></span>
                            <span style="font-size: 14px; color: #da70d6;">Total: <span id="char-total-mp">4</span></span>
                        </div>
                        <div class="hp-mp-controls">
                            <button class="control-btn" onclick="adjustCurrentMP(-1)">-</button>
                            <button class="control-btn" onclick="adjustCurrentMP(1)">+</button>
                        </div>
                    </div>
                </div>
                
                <!-- Rest Buttons -->
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px;">
                    <button class="btn-secondary" onclick="quickRest()" style="background: #6a8a4a; color: white;">
                        <i class="ra ra-heart-plus"></i> Quick Rest
                        <div style="font-size: 11px; opacity: 0.8; margin-top: 2px;">+Half HP/MP</div>
                    </button>
                    <button class="btn-secondary" onclick="longRest()" style="background: #4a6a8a; color: white;">
                        <i class="ra ra-camping-tent"></i> Long Rest
                        <div style="font-size: 11px; opacity: 0.8; margin-top: 2px;">Full Recovery</div>
                    </button>
                </div>
            </div>

            <!-- Compact Stats -->
            <div class="section-card">
                <h2 class="section-title"><i class="ra ra-muscle-up"></i> Attributes</h2>
                <p style="text-align: center; color: #8a8a8a; font-size: 12px; margin-bottom: 15px;">Click any attribute to roll!</p>
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;" id="char-stats-display">
                    <!-- Character stats will be displayed here -->
                </div>
            </div>

            <!-- Skills, Spells, and Weapons Section -->
            <div class="section-card">
                <h2 class="section-title"><i class="ra ra-gear"></i> Skills, Spells & Weapons</h2>
                <p style="text-align: center; color: #8a8a8a; font-size: 12px; margin-bottom: 15px;">Click any skill, spell, or weapon to use!</p>
                
                <!-- Sub-tabs -->
                <div class="char-sub-tabs">
                    <button class="char-sub-tab active" data-sub-tab="skills">
                        <i class="ra ra-gear"></i> Skills
                    </button>
                    <button class="char-sub-tab" data-sub-tab="weapons">
                        <i class="ra ra-sword"></i> Weapons
                    </button>
                    <button class="char-sub-tab" data-sub-tab="spells">
                        <i class="ra ra-lightning"></i> Spells
                    </button>
                </div>

                <!-- Skills Content -->
                <div class="char-sub-content active" id="skills-content">
                    <div class="skills-grid" id="char-skills-grid">
                        <!-- Skills will be populated by JavaScript -->
                    </div>
                    
                    <h3 style="color: #f4d03f; margin: 20px 0 15px 0;"><i class="ra ra-plus-circle"></i> Add Custom Skill</h3>
                    <div class="form-group">
                        <input type="text" id="char-custom-skill-name" placeholder="Skill name" style="margin-bottom: 10px;">
                        <select id="char-custom-skill-stat" style="margin-bottom: 10px;">
                            <option value="strength">Strength</option>
                            <option value="dexterity">Dexterity</option>
                            <option value="constitution">Constitution</option>
                            <option value="intelligence">Intelligence</option>
                            <option value="wisdom">Wisdom</option>
                            <option value="charisma">Charisma</option>
                        </select>
                        <button class="btn-secondary" onclick="addCustomSkillFromCharTab()"><i class="ra ra-plus"></i> Add Skill</button>
                    </div>
                </div>

                <!-- Weapons Content -->
                <div class="char-sub-content" id="weapons-content">
                    <div id="char-weapons-container">
                        <!-- Weapons will be populated by JavaScript -->
                    </div>
                </div>

                <!-- Spells Content -->
                <div class="char-sub-content" id="spells-content">
                    <div id="char-spells-container">
                        <!-- Spells will be populated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Inventory Tab -->
        <div class="tab-content" id="inventory">
            <div class="section-card">
                <h2 class="section-title"><i class="ra ra-sword"></i> Equipment Slots</h2>
                
                <div class="equipment-slots">
                    <div class="equipment-slot" data-slot="mainHand" onclick="showEquipMenu('mainHand')">
                        <div class="slot-label">Main Hand</div>
                        <div class="slot-item" id="mainHand-item">Empty</div>
                        <div class="slot-stats" id="mainHand-stats"></div>
                    </div>
                    <div class="equipment-slot" data-slot="offHand" onclick="showEquipMenu('offHand')">
                        <div class="slot-label">Off Hand</div>
                        <div class="slot-item" id="offHand-item">Empty</div>
                        <div class="slot-stats" id="offHand-stats"></div>
                    </div>
                    <div class="equipment-slot" data-slot="armor" onclick="showEquipMenu('armor')">
                        <div class="slot-label">Armor</div>
                        <div class="slot-item" id="armor-item">Empty</div>
                        <div class="slot-stats" id="armor-stats"></div>
                    </div>
                    <div class="equipment-slot" data-slot="accessory" onclick="showEquipMenu('accessory')">
                        <div class="slot-label">Accessory</div>
                        <div class="slot-item" id="accessory-item">Empty</div>
                        <div class="slot-stats" id="accessory-stats"></div>
                    </div>
                </div>
            </div>

            <div class="section-card">
                <h2 class="section-title"><i class="ra ra-bag"></i> Inventory</h2>
                <div class="inventory-grid" id="inventory-grid">
                    <!-- Inventory items will be populated by JavaScript -->
                </div>
                
                <h3 style="color: #f4d03f; margin: 20px 0 15px 0;"><i class="ra ra-plus-circle"></i> Create New Item</h3>
                <div class="add-item-form">
                    <div class="form-group">
                        <label>Item Name</label>
                        <input type="text" id="item-name" placeholder="Enter item name">
                    </div>
                    <div class="form-group">
                        <label>Item Type</label>
                        <select id="item-type">
                            <option value="weapon">Weapon</option>
                            <option value="armor">Armor</option>
                            <option value="accessory">Accessory</option>
                            <option value="consumable">Consumable</option>
                            <option value="misc">Miscellaneous</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Weapon Size</label>
                        <select id="weapon-size">
                            <option value="light">Light (d4 damage)</option>
                            <option value="medium">Medium (d6 damage)</option>
                            <option value="heavy">Heavy (d8 damage)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Defense Bonus</label>
                        <input type="number" id="item-defense" placeholder="0" min="0">
                    </div>
                    <div class="form-group" style="display: flex; align-items: center; gap: 10px;">
                        <label style="margin: 0;"><input type="checkbox" id="item-twohanded"> Two-Handed</label>
                    </div>
                    <div class="form-group" style="display: flex; align-items: center; gap: 10px;">
                        <label style="margin: 0;"><input type="checkbox" id="item-ranged"> Ranged</label>
                    </div>
                    <button class="btn-primary" onclick="addItem()">
                        <i class="ra ra-plus"></i> Create Item
                    </button>
                </div>
            </div>
        </div>

        <!-- Magic Tab -->
        <div class="tab-content" id="magic">
            <div class="section-card">
                <h2 class="section-title"><i class="ra ra-lightning"></i> Magic System</h2>
                
                <div class="health-magic-display">
                    <div class="hp-mp-box mp-box">
                        <h3>Magic Points</h3>
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                            <span style="font-size: 14px; color: #da70d6;">Current: <span id="magic-current-mp">4</span></span>
                            <span style="font-size: 14px; color: #da70d6;">Total: <span id="magic-total-mp">4</span></span>
                        </div>
                        <div class="hp-mp-controls">
                            <button class="control-btn" onclick="adjustMagicPointsInTab(-1)">-</button>
                            <button class="control-btn" onclick="adjustMagicPointsInTab(1)">+</button>
                        </div>
                        <div style="font-size: 12px; color: #8a8a8a; margin-top: 8px; text-align: center;">WIS + INT</div>
                    </div>
                </div>

                <div id="spells-container">
                    <h3 style="color: #f4d03f; margin: 20px 0 15px 0;"><i class="ra ra-lightning"></i> Known Spells</h3>
                    <div id="spells-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 15px; margin-bottom: 20px;">
                        <!-- Spells will be populated by JavaScript -->
                    </div>
                </div>

                <div style="background: rgba(60, 60, 80, 0.6); padding: 20px; border-radius: 10px; border: 1px solid #4a4a6a;">
                    <h3 style="color: #f4d03f; margin-bottom: 15px;"><i class="ra ra-plus-circle"></i> Create New Spell</h3>
                    
                    <div style="display: grid; gap: 15px;">
                        <div class="form-group">
                            <label>Spell Name</label>
                            <input type="text" id="spell-name" placeholder="Enter spell name">
                        </div>
                        
                        <div class="form-group">
                            <label>Element</label>
                            <select id="spell-element">
                                <option value="fire">🔥 Fire</option>
                                <option value="ice">❄️ Ice</option>
                                <option value="lightning">⚡ Lightning</option>
                                <option value="earth">🌍 Earth</option>
                                <option value="air">💨 Air</option>
                                <option value="water">💧 Water</option>
                                <option value="light">☀️ Light</option>
                                <option value="dark">🌑 Dark</option>
                                <option value="arcane">🔮 Arcane</option>
                                <option value="divine">✨ Divine</option>
                                <option value="nature">🌿 Nature</option>
                                <option value="psychic">🧠 Psychic</option>
                                <option value="shadow">👤 Shadow</option>
                                <option value="force">💥 Force</option>
                            </select>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div class="form-group">
                                <label>Damage Type</label>
                                <select id="damage-type">
                                    <option value="">No Damage</option>
                                    <option value="fixed">Fixed Points (2 pts = 1 MP)</option>
                                    <option value="d6">D6 Roll (3 MP)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Damage Amount</label>
                                <input type="number" id="damage-amount" min="0" max="10" value="0" disabled>
                            </div>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div class="form-group">
                                <label>Healing Type</label>
                                <select id="healing-type">
                                    <option value="">No Healing</option>
                                    <option value="fixed">Fixed Points (2 pts = 1 MP)</option>
                                    <option value="d6">D6 Roll (3 MP)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Healing Amount</label>
                                <input type="number" id="healing-amount" min="0" max="10" value="0" disabled>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>Primary Effect</label>
                            <select id="primary-effect">
                                <option value="">No Primary Effect</option>
                                <option value="stun">Stun Target</option>
                                <option value="slow">Slow Target</option>
                                <option value="blind">Blind Target</option>
                                <option value="fear">Cause Fear</option>
                                <option value="charm">Charm Target</option>
                                <option value="sleep">Put to Sleep</option>
                                <option value="paralyze">Paralyze Target</option>
                                <option value="confusion">Confuse Target</option>
                                <option value="weakness">Cause Weakness</option>
                                <option value="poison">Poison Target</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>Secondary Effect</label>
                            <select id="secondary-effect">
                                <option value="">No Secondary Effect</option>
                                <option value="invisibility">Invisibility</option>
                                <option value="flight">Flight</option>
                                <option value="teleport">Teleport</option>
                                <option value="shield">Magic Shield</option>
                                <option value="haste">Haste</option>
                                <option value="strength">Boost Strength</option>
                                <option value="detect">Detect Magic</option>
                                <option value="dispel">Dispel Magic</option>
                                <option value="light_source">Create Light</option>
                                <option value="darkness">Create Darkness</option>
                                <option value="silence">Silence</option>
                                <option value="levitation">Levitation</option>
                                <option value="phase">Phase Through Matter</option>
                                <option value="mirror_image">Mirror Image</option>
                                <option value="time_slow">Slow Time</option>
                            </select>
                        </div>
                        
                        <div id="spell-cost-display" style="background: rgba(138, 74, 138, 0.2); padding: 12px; border-radius: 8px; border-left: 3px solid #da70d6; text-align: center;">
                            <h4 style="color: #da70d6; margin-bottom: 8px;">Spell Cost Breakdown</h4>
                            <div id="cost-breakdown" style="font-size: 14px; color: #c0c0c0;">
                                Base Cost: 1 MP (activation)
                            </div>
                            <div style="font-size: 18px; font-weight: bold; color: #ffffff; margin-top: 8px;">
                                Total: <span id="total-cost">1</span> MP
                            </div>
                        </div>
                        
                        <button class="btn-primary" onclick="createSpell()" id="create-spell-btn">
                            <i class="ra ra-lightning"></i> Create Spell
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Rolling Tab -->
        <div class="tab-content" id="rolling">
            <div class="section-card">
                <h2 class="section-title"><i class="ra ra-dice"></i> Roll History</h2>
                <p style="text-align: center; color: #8a8a8a; font-size: 12px; margin-bottom: 15px;">
                    Click attributes, skills, weapons, or spells in Character tab to roll! Level <span id="roll-level-display">1</span> dice system active.
                </p>
                
                <div id="dice-system-info" style="background: rgba(74, 106, 138, 0.2); padding: 12px; border-radius: 8px; margin-bottom: 20px; border-left: 3px solid #4a6a8a;">
                    <h4 style="color: #4a6a8a; margin-bottom: 8px; font-size: 14px;"><i class="ra ra-perspective-dice-six"></i> Dice System</h4>
                    <div id="dice-explanation" style="font-size: 12px; color: #c0c0c0;">
                        <!-- Will be populated by JavaScript -->
                    </div>
                </div>
                
                <div id="roll-history-container">
                    <div id="roll-history" style="max-height: 400px; overflow-y: auto;">
                        <!-- Roll history will be populated by JavaScript -->
                    </div>
                    
                    <div style="text-align: center; margin-top: 15px;">
                        <button class="btn-secondary" onclick="clearRollHistory()">
                            <i class="ra ra-cancel"></i> Clear History
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Status Effects Tab -->
        <div class="tab-content" id="status">
            <div class="section-card">
                <h2 class="section-title"><i class="ra ra-heart-broken"></i> Status Effects</h2>
                <p style="text-align: center; color: #8a8a8a; font-size: 12px; margin-bottom: 15px;">
                    Track environmental hazards, injuries, and temporary conditions.
                </p>
                
                <div id="active-status-effects" style="margin-bottom: 20px;">
                    <h3 style="color: #f4d03f; margin-bottom: 15px;"><i class="ra ra-lightning-bolt"></i> Active Effects</h3>
                    <div id="status-effects-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 12px;">
                        <!-- Active status effects will be populated here -->
                    </div>
                </div>

                <div style="background: rgba(60, 60, 80, 0.6); padding: 20px; border-radius: 10px; border: 1px solid #4a4a6a;">
                    <h3 style="color: #f4d03f; margin-bottom: 15px;"><i class="ra ra-plus-circle"></i> Add Status Effect</h3>
                    
                    <div style="display: grid; gap: 15px;">
                        <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 15px;">
                            <div class="form-group">
                                <label>Effect Type</label>
                                <select id="status-effect-type">
                                    <option value="bleeding">🩸 Bleeding</option>
                                    <option value="poisoned">🟢 Poisoned</option>
                                    <option value="radiation">☢️ Radiation Poisoning</option>
                                    <option value="exhausted">😴 Exhausted</option>
                                    <option value="dehydrated">💧 Dehydrated</option>
                                    <option value="hypothermia">🧊 Hypothermia</option>
                                    <option value="heatstroke">🔥 Heat Exhaustion</option>
                                    <option value="broken_bone">🦴 Broken Bone</option>
                                    <option value="stunned">⭐ Stunned</option>
                                    <option value="feared">😰 Feared</option>
                                    <option value="inspired">✨ Inspired</option>
                                    <option value="custom">⚙️ Custom Effect</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Duration (minutes)</label>
                                <input type="number" id="status-duration" value="10" min="1" max="1440">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>Custom Name (if Custom selected)</label>
                            <input type="text" id="custom-status-name" placeholder="Enter custom effect name" style="display: none;">
                        </div>
                        
                        <div class="form-group">
                            <label>Notes</label>
                            <input type="text" id="status-notes" placeholder="Additional details about this effect">
                        </div>
                        
                        <button class="btn-primary" onclick="addStatusEffect()">
                            <i class="ra ra-plus"></i> Add Effect
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Notes Tab -->
        <div class="tab-content" id="notes">
            <div class="section-card">
                <h2 class="section-title"><i class="ra ra-scroll-unfurled"></i> Notes & Information</h2>
                <p style="text-align: center; color: #8a8a8a; font-size: 12px; margin-bottom: 20px;">
                    Keep track of important information, party details, and trading opportunities.
                </p>
                
                <div class="notes-grid">
                    <!-- Personal Notes -->
                    <div class="notes-section">
                        <h3 class="notes-section-title"><i class="ra ra-player"></i> Personal Notes</h3>
                        <textarea id="personal-notes" class="notes-textarea" placeholder="Personal thoughts, character development, goals, backstory details..."></textarea>
                    </div>

                    <!-- Party Notes -->
                    <div class="notes-section">
                        <h3 class="notes-section-title"><i class="ra ra-team-up"></i> Party Notes</h3>
                        <textarea id="party-notes" class="notes-textarea" placeholder="Party plans, group decisions, member information, shared goals..."></textarea>
                    </div>

                    <!-- Session Notes -->
                    <div class="notes-section">
                        <h3 class="notes-section-title"><i class="ra ra-book"></i> Session Notes</h3>
                        <textarea id="session-notes" class="notes-textarea" placeholder="What happened this session, important events, NPC interactions..."></textarea>
                    </div>

                    <!-- Barter & Trade Notes -->
                    <div class="notes-section">
                        <h3 class="notes-section-title"><i class="ra ra-coins"></i> Barter & Trade</h3>
                        <textarea id="barter-notes" class="notes-textarea" placeholder="Trading opportunities, merchants, item values, debts owed..."></textarea>
                    </div>

                    <!-- World Notes -->
                    <div class="notes-section">
                        <h3 class="notes-section-title"><i class="ra ra-map"></i> World Notes</h3>
                        <textarea id="world-notes" class="notes-textarea" placeholder="Locations visited, important places, map details, rumors heard..."></textarea>
                    </div>

                    <!-- Combat Notes -->
                    <div class="notes-section">
                        <h3 class="notes-section-title"><i class="ra ra-crossed-swords"></i> Combat Notes</h3>
                        <textarea id="combat-notes" class="notes-textarea" placeholder="Enemy weaknesses, combat strategies, tactics that work..."></textarea>
                    </div>
                </div>

                <!-- Quick Save Notes Button -->
                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn-secondary" onclick="saveNotesToCharacter()" style="background: #4a6a8a;">
                        <i class="ra ra-save"></i> Save All Notes
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="main.js"></script>
    <script src="character-manager.js"></script>

</body>
</html>